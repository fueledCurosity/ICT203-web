<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Checkout</title>
  <link rel="stylesheet" href="Checkout.css" />
</head>
<body>
  <!-- Header and Navigation -->
  <header>
    <div class="logo">
      <a href="index.html" class="logo link" aria-label="Go to Homepage"> 
        Spendless Shoes
        <img src="kids.shoes/logo.png" alt="Spendless Shoes Logo"/>
      </a> 
    </div>
    <nav aria-label="Main navigation">
      <ul>
        <li><a href="index.html">Homepage</a></li>
        <li><a href="women.html">Women</a></li>
        <li><a href="men.html">Men</a></li>
        <li><a href="kids.html">Kids</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <div class="checkout-container">
      <h2>Checkout</h2>
      <form class="checkout-form" autocomplete="on">
        <section class="form-section">
          <h3>Billing Information</h3>
          <label for="fullname">Full Name</label>
          <input type="text" id="fullname" name="fullname" placeholder="John Doe" autocomplete="name" required autofocus aria-required="true" />

          <label for="email">Email</label>
          <input type="email" id="email" name="email" placeholder="john@example.com" autocomplete="email" required aria-required="true" />

          <label for="address">Address</label>
          <input type="text" id="address" name="address" placeholder="123 Main St" autocomplete="street-address" required aria-required="true" />

          <label for="city">City</label>
          <input type="text" id="city" name="city" placeholder="City" autocomplete="address-level2" required aria-required="true" />

          <div class="row">
            <div class="col">
              <label for="state">State</label>
              <input type="text" id="state" name="state" placeholder="State" autocomplete="address-level1" required aria-required="true" />
            </div>
            <div class="col">
              <label for="zip">ZIP</label>
              <input type="text" id="zip" name="zip" placeholder="Zip Code" autocomplete="postal-code" required aria-required="true" />
            </div>
          </div>
        </section>

        <section class="form-section">
          <h3>Payment Details</h3>
          <label for="cardname">Name on Card</label>
          <input type="text" id="cardname" name="cardname" placeholder="Name on card" autocomplete="cc-name" required aria-required="true" />

          <label for="cardnumber">Card Number</label>
          <input type="text" id="cardnumber" name="cardnumber" placeholder="1234 5678 9012 3456" autocomplete="cc-number" inputmode="numeric" maxlength="19" pattern="\d{4} \d{4} \d{4} \d{4}" required aria-required="true" />

          <div class="row">
            <div class="col">
              <label for="exp">Expiry Date</label>
              <input type="text" id="exp" name="exp" placeholder="MM/YY" autocomplete="cc-exp" inputmode="numeric" maxlength="5" pattern="\d{2}/\d{2}" required aria-required="true" />
            </div>
            <div class="col">
              <label for="cvv">CVV</label>
              <input type="password" id="cvv" name="cvv" placeholder="***" autocomplete="cc-csc" inputmode="numeric" maxlength="4" pattern="\d{3,4}" required aria-required="true" />
            </div>
          </div>
        </section>
        <button type="submit" aria-label="Place your order">Place Order</button>
      </form>
    </div>

    <section class="cart-section" aria-label="Your shopping cart">
      <h3>Your Cart</h3>
    
        <ul id="cart-items"></ul>
<p>Total: $<span id="checkout-total">0.00</span></p>
<script>
  let cart = JSON.parse(localStorage.getItem('cart')) || [];
  let total = 0;
  const cartItems = document.getElementById('cart-items');
  cart.forEach(item => {
    const li = document.createElement('li');
    li.textContent = item.name + ' - $' + item.price.toFixed(2);
    cartItems.appendChild(li);
    total += item.price;
  });
  document.getElementById('checkout-total').textContent = total.toFixed(2);
</script>

      </ul>
      <div>
        <strong>Total Price: $<span id="total-price">0.00</span></strong>
      </div>
      <button id="charge-btn" type="button" aria-label="Charge your card">Charge</button>
      <div id="loader" style="display:none;" aria-live="polite">Processing payment...</div>
    </section>
  </main>

  <script defer>
    // Input masking for card number and expiry
    document.addEventListener('DOMContentLoaded', function () {
      // Card number mask
      const cardInput = document.getElementById('cardnumber');
      cardInput.addEventListener('input', function(e) {
        let v = e.target.value.replace(/\D/g, '').substring(0,16);
        v = v.replace(/(\d{4})(?=\d)/g, '$1 ');
        e.target.value = v.trim();
      });

      // Expiry date mask
      const expInput = document.getElementById('exp');
      expInput.addEventListener('input', function(e) {
        let v = e.target.value.replace(/\D/g, '').substring(0,4);
        if (v.length > 2) v = v.substring(0,2) + '/' + v.substring(2,4);
        e.target.value = v;
      });
    });

    // Cart total calculation
    function calculateTotal() {
      let total = 0;
      document.querySelectorAll('#cart-items li').forEach(function(item) {
        total += parseFloat(item.getAttribute('data-price'));
      });
      document.getElementById('total-price').innerText = total.toFixed(2);
    }
    // Calculate total on page load
    calculateTotal();

      
